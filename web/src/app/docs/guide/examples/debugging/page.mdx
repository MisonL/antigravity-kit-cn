export const metadata = {
    title: "示例：系统化调试 | Antigravity Kit",
    description: "学习如何使用 /debug 的四阶段调查协议解决复杂问题。",
};

import {
    Callout,
    StepList,
    Step,
    Terminal,
    TerminalLine,
    TerminalBlock,
    ProTips,
    Tip,
} from "@/components/mdx";

# 系统化调试

使用严谨的 `/debug` 工作流解决复杂问题。

## 概览

`/debug` 强制执行 **四阶段调查协议**（发现、假设、验证、解决）。它要求在改代码前先拿到证据，避免“拍脑袋式”开发。

<Callout type="info" title="When to use:">
    - “登录按钮没有反应” - “API 间歇性返回 500” - “仅在移动端崩溃”
</Callout>

## 过程

<StepList>
  <Step number={1} title="发现">
    收集事实：错误日志、用户反馈、复现步骤。

    ```bash
    /debug 使用正确凭据登录仍返回 403
    ```

  </Step>
  <Step number={2} title="假设">
    按可能性优先级提出潜在原因。
  </Step>
  <Step number={3} title="验证">
    使用脚本或日志系统性验证每个假设。
  </Step>
  <Step number={4} title="解决">
    修复问题并补充回归测试。
  </Step>
</StepList>

## 示例对话

<Terminal>
  <TerminalLine type="user">/debug 表单提交静默失败</TerminalLine>

<TerminalBlock>
    <TerminalLine type="agent">**阶段 1：发现**</TerminalLine>
    正在读取 `CheckoutForm.tsx`... 找到 `handleSubmit`。
    <span className="text-red-400">错误：无法读取 undefined 的属性</span>
</TerminalBlock>

<TerminalBlock>
    <TerminalLine type="agent">**阶段 2：假设**</TerminalLine>
    <div className="text-xs mt-1">
        1. `emailRef.current` 在挂载时为 null
        <br />
        2. 事件处理函数未正确绑定
    </div>
</TerminalBlock>

  <TerminalBlock highlight>
    <TerminalLine type="agent">**阶段 4：解决**</TerminalLine>
    修复：为 `emailRef` 添加空值检查。
    <span className="text-green-400">✅ 测试通过：表单成功提交。</span>
  </TerminalBlock>
</Terminal>

## 专家建议

<ProTips>
    <Tip title="提供上下文">贴出完整错误信息或堆栈，排查更快。</Tip>
    <Tip title="信任，但要验证">让智能体再次复现，确认问题已解决。</Tip>
</ProTips>

## 下一步

- 在现有 Bug 上尝试 `/debug`
- 查看 [生产部署](/docs/guide/examples/deployment) 发布修复
