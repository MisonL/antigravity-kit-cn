# 权衡分析与 ADR

> 为每一个架构决策记录权衡。

## 决策框架

对每一个架构组件，记录：

```markdown
## 架构决策记录（ADR）

### 背景
- **问题**： [我们在解决什么问题？]
- **约束**： [团队规模、量级、时间线、预算]

### 已考虑的选项

| 选项 | 优点 | 缺点 | 复杂度 | 何时有效 |
|------|------|------|--------|---------|
| 选项 A | 收益 1 | 成本 1 | 低 | [适用条件] |
| 选项 B | 收益 2 | 成本 2 | 高 | [适用条件] |

### 决策
**选择**： [选项 B]

### 理由
1. [理由 1 - 与约束相关]
2. [理由 2 - 与需求相关]

### 接受的权衡（trade-offs）
- [我们放弃了什么]
- [为什么这是可以接受的]

### 后果
- **正面**： [我们获得的收益]
- **负面**： [我们接受的成本/风险]
- **缓解**： [如何应对负面影响]

### 重新审视触发点
- [何时需要重新考虑此决策]
```

## ADR 模板

```markdown
# ADR-[XXX]: [决策标题]

## 状态
Proposed（提议） | Accepted（已采纳） | Deprecated（已废弃） | Superseded by（被取代） [ADR-YYY]

## 背景
[什么问题？什么约束？]

## 决策
[我们选择了什么 - 具体描述]

## 理由
[为什么 - 关联需求和约束]

## 权衡
[我们放弃了什么 - 诚实记录]

## 后果
- **正面**： [收益]
- **负面**： [成本]
- **缓解**： [如何应对]
```

## ADR 存储结构

```
docs/
└── architecture/
    ├── adr-001-use-nextjs.md
    ├── adr-002-postgresql-over-mongodb.md
    └── adr-003-adopt-repository-pattern.md
```
