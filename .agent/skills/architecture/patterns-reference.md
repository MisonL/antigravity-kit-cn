# 架构模式参考

> 常用模式快速参考及使用指南。

## 数据访问模式

| 模式 | 适用场景 | 不适用场景 | 复杂度 |
| ---- | -------- | ---------- | ------ |
| **Active Record（活动记录）** | 简单 CRUD（增删改查），快速原型开发 | 复杂查询，多数据源 | 低 |
| **Repository（仓储模式）** | 需要测试，多数据源 | 简单 CRUD（增删改查），单一数据库 | 中 |
| **Unit of Work（工作单元）** | 复杂事务 | 简单操作 | 高 |
| **Data Mapper（数据映射）** | 复杂领域、性能要求高 | 简单 CRUD（增删改查），快速开发 | 高 |

## 领域逻辑模式

| 模式 | 适用场景 | 不适用场景 | 复杂度 |
| ---- | -------- | ---------- | ------ |
| **Transaction Script（事务脚本）** | 简单 CRUD（增删改查），过程式逻辑 | 复杂业务规则 | 低 |
| **Table Module（表模块）** | 基于记录的逻辑 | 需要丰富领域行为 | 低 |
| **Domain Model（领域模型）** | 复杂业务逻辑 | 简单 CRUD（增删改查） | 中 |
| **DDD（完整领域驱动）** | 复杂领域，有领域专家 | 简单领域，无领域专家 | 高 |

## 分布式系统模式

| 模式 | 适用场景 | 不适用场景 | 复杂度 |
| ---- | -------- | ---------- | ------ |
| **Modular Monolith（模块化单体）** | 小团队，边界不清晰 | 上下文清晰、扩缩需求不同 | 中 |
| **Microservices（微服务）** | 不同扩缩需求、大团队 | 小团队、简单领域 | 极高 |
| **Event-Driven（事件驱动）** | 实时性、松耦合 | 简单工作流、强一致性 | 高 |
| **CQRS（命令查询职责分离）** | 读写性能分化明显 | 简单 CRUD（增删改查）、同一模型 | 高 |
| **Saga（补偿事务）** | 分布式事务 | 单一数据库、简单 ACID（事务特性） | 高 |

## API 模式

| 模式 | 适用场景 | 不适用场景 | 复杂度 |
| ---- | -------- | ---------- | ------ |
| **REST（表述性状态转移）** | 标准 CRUD（增删改查），资源导向 | 实时性、复杂查询 | 低 |
| **GraphQL（图查询语言）** | 灵活查询，多客户端 | 简单 CRUD（增删改查）、强缓存需求 | 中 |
| **gRPC（远程过程调用）** | 内部服务、高性能 | 公共 API、浏览器客户端 | 中 |
| **WebSocket（全双工通信）** | 实时更新 | 简单请求/响应 | 中 |

---

## 简单原则

**“从简单开始，只有在证明有必要时才增加复杂性。”**

- 你可以随时在以后添加模式。
- 移除复杂性远比增加复杂性难得多。
- 有疑问时，选择更简单的选项。
