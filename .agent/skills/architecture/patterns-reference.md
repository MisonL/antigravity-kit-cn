# 架构模式参考 (Architecture Patterns Reference)

> 常用模式快速参考及使用指南。

## 数据访问模式 (Data Access Patterns)

| 模式              | 适用场景                  | 不适用场景              | 复杂度 |
| :---------------- | :------------------------ | :---------------------- | :----- |
| **Active Record** | 简单的 CRUD，快速原型开发 | 复杂查询，多数据源      | 低     |
| **Repository**    | 需要测试，多数据源        | 简单的 CRUD，单一数据库 | 中     |
| **Unit of Work**  | 复杂的事务处理            | 简单操作                | 高     |
| **Data Mapper**   | 复杂领域模型，注重性能    | 简单的 CRUD，快速开发   | 高     |

## 领域逻辑模式 (Domain Logic Patterns)

| 模式                   | 适用场景                | 不适用场景           | 复杂度 |
| :--------------------- | :---------------------- | :------------------- | :----- |
| **Transaction Script** | 简单的 CRUD，过程式逻辑 | 复杂的业务规则       | 低     |
| **Table Module**       | 基于记录的逻辑          | 需要丰富领域行为时   | 低     |
| **Domain Model**       | 复杂的业务逻辑          | 简单的 CRUD          | 中     |
| **DDD (完整)**         | 复杂领域，有领域专家    | 简单领域，无领域专家 | 高     |

## 分布式系统模式 (Distributed System Patterns)

| 模式                 | 适用场景             | 不适用场景               | 复杂度 |
| :------------------- | :------------------- | :----------------------- | :----- |
| **Modular Monolith** | 小团队，边界尚不清晰 | 上下文清晰，不同扩展需求 | 中     |
| **Microservices**    | 不同扩展需求，大团队 | 小团队，简单领域         | 极高   |
| **Event-Driven**     | 实时性，松耦合       | 简单工作流，强一致性     | 高     |
| **CQRS**             | 读/写性能需求差异大  | 简单 CRUD，同一模型      | 高     |
| **Saga**             | 分布式事务           | 单一数据库，简单 ACID    | 高     |

## API 模式 (API Patterns)

| 模式          | 适用场景               | 不适用场景             | 复杂度 |
| :------------ | :--------------------- | :--------------------- | :----- |
| **REST**      | 标准 CRUD，资源导向    | 实时，复杂嵌套查询     | 低     |
| **GraphQL**   | 灵活查询，多客户端适配 | 简单 CRUD，需简单缓存  | 中     |
| **gRPC**      | 内部服务通信，高性能   | 公开 API，浏览器客户端 | 中     |
| **WebSocket** | 实时双向通信           | 简单请求/响应          | 中     |

---

## 简单原则 (Simplicity Principle)

**"从简单开始，只有在证明有必要时才增加复杂性。"**

- 你可以随时在以后添加模式。
- 移除复杂性远比增加复杂性难得多。
- 当有疑问时，选择更简单的选项。
