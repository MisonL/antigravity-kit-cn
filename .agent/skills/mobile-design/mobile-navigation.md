# 移动端导航参考指南 (Mobile Navigation Reference)

> 导航模式、深度链接 (Deep linking)、返回处理以及标签/堆栈/抽屉决策。
> **导航是应用的骨架 —— 导航一旦出错，应用的一切都会显得凌乱。**

---

## 1. 导航选择决策树 (Navigation Selection Tree)

- **3-5 个顶级路由 (等重)** → ✅ 标签栏 (Tab Bar)。
- **深层分级内容 (钻取)** → ✅ 堆栈导航 (Stack Navigation)。
- **目标超过 5 个** → ✅ 侧边抽屉 (Drawer Navigation)。
- **单向线性流程** → ✅ 纯堆栈 (Stack only - Wizard模式)。

---

## 2. 标签栏导航 (Tab Bar)

### 规则与状态保存

- **每一项拥有独立堆栈**: 切换标签时不应重置该标签内的导航进度。
- **图标与标签**: 始终显示文字标签以确保无障碍性。

---

## 3. 堆栈导航 (Stack Navigation)

- **Push**: 推入新屏幕。
- **Pop**: 返回上一级。
- **返回处理 (Back Handling)**: iOS 期望边缘滑动返回，Android 兼容系统返回键。**严禁劫持返回键导致意外行为。**

---

## 4. 模态导航 (Modal Navigation)

- **Push vs Modal**: Push 用于层级深入（顺叙），Modal 用于独立任务（插叙，如“创建新内容”、“设置”）。
- **Sheet (弹窗卡片)**: 适合快速、轻量的交互任务。

---

## 5. 深度链接 (Deep Linking)

### Day One 原则

**从第一天就开始规划深度链接**。后期重构深度链接会导致严重的导航状态混乱。

- **全堆栈构建**: 深度链接进入 `myapp://product/123` 时，应自动在底部构建 `Home` 为根，按返回键应能回到首页。
- **身份验证感知**: 进入需要登录的链接时，先保存目标，登录后再自动跳转。

---

## 6. 导航状态持久化 (Navigation Persistence)

- **应持久化**: 当前选中的标签、列表的滚动位置、表单草稿。
- **不应持久化**: 临时对话框状态、过时的数据。

---

## 7. 导航反模式 (Navigation Anti-patterns)

- ❌ **返回路径不一致**: 用户点返回却退出了应用。
- ❌ **隐藏主要功能**: 关键功能藏在抽屉里，无法被发现。
- ❌ **标签栏重置**: 切换标签导致已输入的信息丢失。
- ❌ **无深度链接**: 无法从推送通知精准跳转至内容。

---

## 8. 导航检查清单 (Navigation Checklist)

- [ ] 应用类型与导航模式是否匹配？
- [ ] 是否规划并测试了深度链接 URL Schema？
- [ ] 每一个屏幕都有清晰的返回路径吗？
- [ ] 切换标签是否能保持页面状态？
- [ ] iOS 边缘滑动返回是否生效？

---

> **记住：** 好的导航是隐形的。用户不应该思考“如何到达某处” —— 他们只需到达即可。如果你注意到了导航，那它一定有问题。
