---
name: plan-writing
description: 结构化任务规划 (Structured task planning)，包含清晰的任务拆解、依赖关系和验收标准。适用于实现功能、重构或任何多步工作。
allowed-tools: Read, Glob, Grep
---

# 计划编写 (Plan Writing)

> 来源：obra/superpowers

---

## 概览 (Overview)

本技能提供了一个将工作分解为清晰、可执行的任务并带有验证标准的框架。

---

## 任务拆解原则 (Task Breakdown Principles)

### 1. 小型化、专注的任务

- 每个任务应控制在 2-5 分钟内完成。
- 每个任务有一个明确的结果。
- 可独立进行验证。

### 2. 清晰的验证方式

- 您如何知道它已完成？
- 您可以检查/测试什么？
- 预期的输出是什么？

### 3. 逻辑顺序

- 识别并明确依赖关系。
- 在可能的情况下并行开展工作。
- 突出关键路径。
- **阶段 X：验证永远置于最后。**

### 4. 项目根目录下的动态命名

- 计划文件以 `{task-slug}.md` 格式保存在**项目根目录**。
- 名称根据任务派生（例如：“add auth” → `auth-feature.md`）。
- **严禁**存放在 `.claude/`、`docs/` 或临时文件夹中。

---

## 规划原则 (非模板！) (Planning Principles)

> 🔴 **不设固定模板。每个计划对当前任务而言都是唯一的。**

### 原则 1：保持简洁 (Keep It SHORT)

| ❌ 错误做法                    | ✅ 正确做法                |
| ------------------------------ | -------------------------- |
| 包含 50 个任务且层层嵌套子任务 | 最多包含 5-10 个清晰的任务 |
| 列出每一个微小的操作步骤       | 仅列出可执行的关键项       |
| 冗长的描述文字                 | 每个任务仅用单行描述       |

> **准则：** 如果计划超过 1 页，则说明太长了。请务必简化。

---

### 原则 2：具体化，而非通用化 (Be SPECIFIC)

| ❌ 错误做法    | ✅ 正确做法                                       |
| -------------- | ------------------------------------------------- |
| “搭建项目”     | 运行 `npx create-next-app`                        |
| “添加身份认证” | 安装 next-auth，创建 `/api/auth/[...nextauth].ts` |
| “编写 UI 样式” | 为 `Header.tsx` 添加 Tailwind 类名                |

> **准则：** 每个任务都应有一个清晰、可验证的结果。

---

### 原则 3：根据项目类型动态调整内容

**针对新项目 (NEW PROJECT)：**

- 使用什么技术栈？（预先决定）
- MVP 是什么？（最小核心功能）
- 文件结构如何规划？

**针对功能新增 (FEATURE ADDITION)：**

- 受影响的文件有哪些？
- 需要哪些依赖项？
- 如何验证其功能正常？

**针对 Bug 修复 (BUG FIX)：**

- 根本原因 (Root cause) 是什么？
- 哪些文件/行号需要修改？
- 如何测试修复效果？

---

### 原则 4：脚本应与项目关联

> 🔴 **严禁复制粘贴脚本命令。请根据项目类型进行选择。**

| 项目类型     | 相关脚本                                  |
| ------------ | ----------------------------------------- |
| 前端 / React | `ux_audit.py`, `accessibility_checker.py` |
| 后端 / API   | `api_validator.py`, `security_scan.py`    |
| 移动端       | `mobile_audit.py`                         |
| 数据库       | `schema_validator.py`                     |
| 全栈项目     | 根据涉及的模块混合使用上述脚本            |

**错误做法：** 在每个计划中都列出所有脚本。
**正确做法：** 仅列出与**本次**任务相关的脚本。

---

### 原则 5：验证过程应简单明了

| ❌ 错误做法        | ✅ 正确做法                                   |
| ------------------ | --------------------------------------------- |
| “验证组件工作正常” | 运行 `npm run dev`，点击按钮，看到 Toast 提示 |
| “测试 API”         | 执行 `curl localhost:3000/api/users` 返回 200 |
| “检查样式”         | 打开浏览器，确认暗色模式切换正常              |

---

## 计划结构 (灵活变通，非固定！) (Plan Structure)

```
# [任务名称]

## 目标 (Goal)
用一句话描述：我们要构建/修复什么？

## 任务清单 (Tasks)
- [ ] 任务 1：[具体动作] → 验证：[如何检查]
- [ ] 任务 2：[具体动作] → 验证：[如何检查]
- [ ] 任务 3：[具体动作] → 验证：[如何检查]

## 完成标志 (Done When)
- [ ] [主要成功标准]
```

> **仅此而已。** 除非确实需要，否则无需划分阶段或子章节。
> 保持极简。仅在必要时增加复杂度。

---

## 最佳实践速查 (Best Practices)

1. **以目标开始** —— 我们要做什么？
2. **最多 10 个任务** —— 如果超过，请拆分为多个计划。
3. **每个任务均可验证** —— 具有清晰的“完成”标准。
4. **项目相关性** —— 严禁复制粘贴模板。
5. **动态更新** —— 完成时及时标记 `[x]`。

---

## 何时使用 (When to Use)

- 从零开始的新项目。
- 新增功能。
- 修复复杂的 Bug。
- 重构多个文件。

---

## Skills 兼容说明 (最小补充)

- **机制基线**：沿用上游 `.agent/skills/plan-writing/SKILL.md`。
- **Codex 适配**：由适配层映射到 `.agents/skills/plan-writing/SKILL.md`。
- **注意**：文档层不改技能流程；仅在此定义结构化规划标准。
