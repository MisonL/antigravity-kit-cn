---
name: plan-writing
description: 结构化任务规划 (Structured task planning)，包含清晰的任务拆解、依赖关系和验收标准。适用于实现功能、重构或任何多步工作。
allowed-tools: Read, Glob, Grep
---

# 计划编写 (Plan Writing)

> 来源：obra/superpowers

---

## 概述

此技能 (Skill) 提供了一个框架，用于将工作拆解为清晰、可执行的任务，并配以验收标准。

---

## 任务拆解原则

### 1. 小型化、专注任务

- 每个任务应耗时 2-5 分钟
- 每个任务对应一个明确的结果
- 独立可验证

### 2. 清晰的验证

- 你如何知道任务已完成？
- 你可以检查/测试什么？
- 预期输出是什么？

### 3. 逻辑排序

- 识别依赖项
- 尽可能进行并行工作
- 突出关键路径
- **阶段 X：验证阶段永远排在最后**

### 4. 项目根目录下的动态命名

- 计划文件以 `{task-slug}.md` 形式保存在 **项目根目录** 下
- 名称源自任务（例如：“添加认证” → `auth-feature.md`）
- **绝不**保存在 `.claude/`、`docs/` 或临时目录中

---

## 计划原则（非模板！）

> 🔴 **严禁使用固定模板。每个计划对任务而言都是唯一的。**

### 原则 1：保持简短

| ❌ 错误做法                | ✅ 正确做法                |
| -------------------------- | -------------------------- |
| 列出 50 个带有子任务的任务 | 最多列出 5-10 个清晰的任务 |
| 列出每一个微小的步骤       | 仅列出可执行的项目         |
| 冗长的描述                 | 每个任务仅用一行说明       |

> **规则：** 如果计划长度超过 1 页，则说明太长了。请简化。

---

### 原则 2：具体化，而非笼统化

| ❌ 错误做法    | ✅ 正确做法                                         |
| -------------- | --------------------------------------------------- |
| “设置项目”     | 运行 `npx create-next-app`                          |
| “添加身份验证” | 安装 next-auth，并创建 `/api/auth/[...nextauth].ts` |
| “调整 UI 样式” | 在 `Header.tsx` 中添加 Tailwind 类名                |

> **规则：** 每个任务必须有一个清晰、可验证的结果。

---

### 原则 3：根据项目类型动态生成内容

**针对新项目 (New Project)：**

- 使用什么技术栈？（最先决定）
- MVP（最小可行性产品）是什么？（最简功能）
- 文件结构是什么样的？

**针对新增功能 (Feature Addition)：**

- 受影响的文件有哪些？
- 需要哪些依赖项？
- 如何验证其是否正常工作？

**针对错误修复 (Bug Fix)：**

- 根本原因是什么？
- 需要修改哪个文件/哪一行？
- 如何测试修复效果？

---

### 原则 4：脚本与项目相关联

> 🔴 **不要直接复制粘贴脚本命令。根据项目类型进行选择。**

| 项目类型          | 相关脚本                                  |
| ----------------- | ----------------------------------------- |
| 前端 / React      | `ux_audit.py`, `accessibility_checker.py` |
| 后端 / API        | `api_validator.py`, `security_scan.py`    |
| 移动端 (Mobile)   | `mobile_audit.py`                         |
| 数据库 (Database) | `schema_validator.py`                     |
| 全栈 (Full-stack) | 根据你修改的内容混合使用上述脚本          |

**错误写法：** 在每个计划中都添加所有脚本。
**正确写法：** 仅添加与当前任务相关的脚本。

---

### 原则 5：验证应当简单明了

| ❌ 错误做法            | ✅ 正确做法                                            |
| ---------------------- | ------------------------------------------------------ |
| “验证组件是否正常工作” | “运行 `npm run dev`，点击按钮，查看 Toast 提示”        |
| “测试 API”             | “运行 `curl localhost:3000/api/users` 返回 200 状态码” |
| “检查样式”             | “打开浏览器，验证深色模式切换是否生效”                 |

---

## 计划结构（灵活，而非固定！）

```markdown
# [任务名称]

## 目标

用一句话说明：我们正在构建或修复什么？

## 任务

- [ ] 任务 1：[具体行动] → 验证：[如何检查]
- [ ] 任务 2：[具体行动] → 验证：[如何检查]
- [ ] 任务 3：[具体行动] → 验证：[如何检查]

## 完成标准

- [ ] [主要成功指标]
```

> **仅此而已。** 除非确实需要，否则不设置阶段或子章节。
> 保持极简。仅在需要时增加复杂性。

## 备注

[任何重要的考量因素]

```

---

## 最佳实践（快速参考）

1. **从目标开始** —— 我们正在构建或修复什么？
2. **最多 10 个任务** —— 如果超过，请拆分为多个计划。
3. **每个任务可验证** —— 具有清晰的“完成”标准。
4. **项目专属** —— 不使用复制粘贴的模板。
5. **随时更新进度** —— 完成时标记为 `[x]`。

---

## 何时使用

- 从零开始的新项目
- 添加新功能
- 修复错误（如果逻辑复杂）
- 对多个文件进行重构 (Refactoring)
```
