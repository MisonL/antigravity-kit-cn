---
name: plan-writing
description: 结构化任务规划，包含清晰的分解、依赖关系和验证标准。在实现功能、重构或任何多步工作时使用。
allowed-tools: Read, Glob, Grep
---

# Plan Writing - 计划编写

> 来源: obra/superpowers

## 概述 (Overview)

此 Skill 提供了一个框架，用于将工作分解为具有验证标准的清晰、可执行的任务。

## 任务分解原则 (Task Breakdown Principles)

### 1. 小而专注的任务

- 每个任务应耗时 2-5 分钟
- 每个任务有一个明确的结果
- 可独立验证

### 2. 清晰的验证

- 你怎么知道它完成了？
- 你能检查/测试什么 (check/test)？
- 预期的输出是什么？

### 3. 逻辑排序

- 识别依赖关系
- 尽可能并行工作
- 突出关键路径
- **阶段 X: 验证始终在最后**

### 4. 项目根目录动态命名

- 计划文件保存为项目根目录下的 `{task-slug}.md`
- 名称源自任务 (例如 "add auth" → `auth-feature.md`)
- **绝不 (NEVER)**放在 `.claude/`、`docs/` 或临时文件夹中

## 规划原则 (非模板！)

> 🔴 **不要固定模板。每个计划对任务来说都是唯一的。**

### 原则 1: 保持简短 (Keep It SHORT)

| ❌ 错误             | ✅ 正确                |
| ------------------- | ---------------------- |
| 50 个任务带子子任务 | 最多 5-10 个清晰的任务 |
| 列出每个微步骤      | 仅可执行的项目         |
| 冗长的描述          | 每个任务一行           |

> **规则:** 如果计划超过 1 页，那就太长了。简化它。

---

### 原则 2: 具体，不通用 (Be SPECIFIC, Not Generic)

| ❌ 错误     | ✅ 正确                                             |
| ----------- | --------------------------------------------------- |
| "设置项目"  | "运行 `npx create-next-app`"                        |
| "添加认证"  | "安装 next-auth，创建 `/api/auth/[...nextauth].ts`" |
| "样式化 UI" | "添加 Tailwind 类到 `Header.tsx`"                   |

> **规则:** 每个任务都应该有清晰、可验证的结果。

---

### 原则 3: 基于项目类型的动态内容

**对于新项目 (NEW PROJECT):**

- 什么技术栈？(先决定)
- MVP 是什么？(最小功能)
- 文件结构是什么？

**对于功能添加 (FEATURE ADDITION):**

- 哪些文件受影响？
- 需要什么依赖？
- 如何验证它工作？

**对于 Bug 修复 (BUG FIX):**

- 根本原因是什么？
- 改变哪个文件/行？
- 如何测试修复？

---

### 原则 4: 脚本是特定于项目的

> 🔴 **不要复制粘贴脚本命令。根据项目类型选择。**

| 项目类型       | 相关脚本                                  |
| -------------- | ----------------------------------------- |
| Frontend/React | `ux_audit.py`, `accessibility_checker.py` |
| Backend/API    | `api_validator.py`, `security_scan.py`    |
| Mobile         | `mobile_audit.py`                         |
| Database       | `schema_validator.py`                     |
| Full-stack     | 根据你触及的内容混合上述脚本              |

**错误:** 添加所有脚本到每个计划
**正确:** 仅与**此**任务相关的脚本

---

### 原则 5: 验证很简单

| ❌ 错误            | ✅ 正确                                    |
| ------------------ | ------------------------------------------ |
| "验证组件工作正常" | "运行 `npm run dev`，点击按钮，看到 Toast" |
| "测试 API"         | "curl localhost:3000/api/users 返回 200"   |
| "检查样式"         | "打开浏览器，验证暗色模式切换工作"         |

---

## 计划结构 (灵活，不固定!)

```markdown
# [任务名称]

## 目标 (Goal)

一句话：我们要构建/修复什么？

## 任务 (Tasks)

- [ ] 任务 1: [具体行动] → 验证: [如何检查]
- [ ] 任务 2: [具体行动] → 验证: [如何检查]
- [ ] 任务 3: [具体行动] → 验证: [如何检查]

## 完成标准 (Done When)

- [ ] [主要成功标准]
```

> **就是这样。** 除非真正需要，否则不要阶段，不要子部分。
> 保持极简。仅在需要时增加复杂性。

## 笔记 (Notes)

[任何重要的考虑因素]

```

---

## 最佳实践 (快速参考)

1. **从目标开始** - 我们要构建/修复什么？
2. **最多 10 个任务** - 如果更多，拆分成多个计划
3. **每个任务可验证** - 清晰的 "done" 标准
4. **特定于项目** - 不要复制粘贴模板
5. **随做随更新** - 完成时标记 `[x]`

---

## 何时使用

- 从头开始新项目
- 添加一个功能
- 修复 Bug (如果复杂)
- 重构多个文件
```
