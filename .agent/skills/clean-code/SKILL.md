---
name: clean-code
description: åŠ¡å®çš„ç¼–ç æ ‡å‡† (Pragmatic coding standards) â€”â€” ç®€æ´ã€ç›´æ¥ã€ä¸è¿›è¡Œè¿‡åº¦è®¾è®¡ã€ä¸ç¼–å†™æ— ç”¨æ³¨é‡Šã€‚
allowed-tools: Read, Write, Edit
version: 2.0
priority: CRITICAL
---

# æ•´æ´ä»£ç  - åŠ¡å®çš„ AI ç¼–ç æ ‡å‡† (Clean Code)

> **æ ¸å¿ƒæŠ€èƒ½ (CRITICAL SKILL)** â€”â€” ä¿æŒ**ç®€æ´ã€ç›´æ¥å¹¶ä¸“æ³¨äºè§£å†³æ–¹æ¡ˆ**ã€‚

---

## æ ¸å¿ƒåŸåˆ™ (Core Principles)

| åŸåˆ™           | è§„åˆ™                                         |
| -------------- | -------------------------------------------- |
| **SRP**        | å•ä¸€èŒè´£åŸåˆ™ â€”â€” æ¯ä¸ªå‡½æ•°/ç±»åªåš**ä¸€ä»¶**äº‹æƒ…  |
| **DRY**        | ä¸è¦é‡å¤è‡ªå·± â€”â€” æå–é‡å¤é¡¹ï¼Œé‡å¤åˆ©ç”¨ (Reuse) |
| **KISS**       | ä¿æŒç®€å• â€”â€” é‡‡ç”¨èƒ½è·‘é€šçš„æœ€ç®€å•æ–¹æ¡ˆ           |
| **YAGNI**      | ä½ ä¸ä¼šéœ€è¦å®ƒ â€”â€” ä¸è¦æ„å»ºæœªè¢«è¦æ±‚çš„åŠŸèƒ½       |
| **ç«¥å­å†›å†›è§„** | ç¦»å¼€æ—¶è®©ä»£ç æ¯”ä½ æ¥æ—¶æ›´æ•´æ´                   |

---

## å‘½åè§„åˆ™ (Naming Rules)

| å…ƒç´                   | è§„èŒƒ                                                |
| --------------------- | --------------------------------------------------- |
| **å˜é‡ (Variables)**  | æ­ç¤ºæ„å›¾ï¼šç”¨ `userCount` è€Œé `n`                   |
| **å‡½æ•° (Functions)**  | åŠ¨è¯ + åè¯ï¼šç”¨ `getUserById()` è€Œé `user()`       |
| **å¸ƒå°”å€¼ (Booleans)** | æé—®å½¢å¼ï¼š`isActive`, `hasPermission`, `canEdit`    |
| **å¸¸é‡ (Constants)**  | å…¨å¤§å†™è›‡å½¢å‘½å (SCREAMING_SNAKE)ï¼š`MAX_RETRY_COUNT` |

> **å‡†åˆ™ï¼š** å¦‚æœä½ éœ€è¦é€šè¿‡æ³¨é‡Šæ¥è§£é‡Šä¸€ä¸ªåå­—ï¼Œè¯·ç›´æ¥é‡å‘½åã€‚

---

## å‡½æ•°è§„åˆ™ (Function Rules)

| è§„åˆ™         | æè¿°                                      |
| ------------ | ----------------------------------------- |
| **çŸ­å°**     | æœ€å¤š 20 è¡Œï¼Œç†æƒ³æƒ…å†µä¸‹ 5-10 è¡Œ            |
| **ä¸“æ³¨**     | åªåšä¸€ä»¶äº‹ï¼Œå¹¶æŠŠå®ƒåšå¥½                    |
| **å±‚æ¬¡**     | æ¯ä¸ªå‡½æ•°åªåŒ…å«ä¸€ä¸ªæŠ½è±¡å±‚çº§                |
| **å‚æ•°å°‘**   | æœ€å¤š 3 ä¸ªå‚æ•°ï¼Œä¼˜å…ˆé€‰æ‹© 0-2 ä¸ª            |
| **æ— å‰¯ä½œç”¨** | ä¸è¦äº§ç”Ÿé¢„æœŸä¹‹å¤–çš„è¾“å…¥çŠ¶æ€æ”¹å˜ (Mutation) |

---

## ä»£ç ç»“æ„ (Code Structure)

| æ¨¡å¼                       | åº”ç”¨å»ºè®®                            |
| -------------------------- | ----------------------------------- |
| **å«è¯­å¥ (Guard Clauses)** | é’ˆå¯¹è¾¹ç¼˜æƒ…å†µåŠæ—©è¿”å› (Early return) |
| **æ‰å¹³åŒ– > åµŒå¥—**          | é¿å…æ·±åº¦åµŒå¥—ï¼ˆæœ€å¤š 2 å±‚ï¼‰           |
| **ç»„åˆ (Composition)**     | å°†çŸ­å°çš„å‡½æ•°ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨          |
| **å°±è¿‘åŸåˆ™ (Colocation)**  | ä¿æŒç›¸å…³ä»£ç çš„ç‰©ç†è·ç¦»å°½å¯èƒ½æ¥è¿‘    |

---

## AI ç¼–ç é£æ ¼ (AI Coding Style)

| åœºæ™¯             | è¡ŒåŠ¨å»ºè®®               |
| ---------------- | ---------------------- |
| è€æ¿è¦æ±‚ä¸€ä¸ªåŠŸèƒ½ | ç›´æ¥ç¼–å†™ä»£ç å®ç°å®ƒ     |
| è€æ¿æŠ¥å‘Šä¸€ä¸ª Bug | ä¿®å¤å®ƒï¼Œä¸è¦å¤šåšè§£é‡Š   |
| éœ€æ±‚ä¸æ˜ç¡®       | ç›´æ¥è¯¢é—®ï¼Œä¸è¦è‡ªè¡Œå‡è®¾ |

---

## åæ¨¡å¼ (åº”é¿å…çš„è¡Œä¸º - DON'T)

| âŒ é”™è¯¯æ¨¡å¼              | âœ… æ¨èä¿®å¤æ–¹æ¡ˆ            |
| ------------------------ | -------------------------- |
| æ¯ä¸€è¡Œéƒ½å†™æ³¨é‡Š           | åˆ é™¤æ˜¾è€Œæ˜“è§çš„æ³¨é‡Š         |
| ä¸ºå•è¡Œé€»è¾‘å°è£… Helper    | ç›´æ¥å†…è” (Inline) ä»£ç      |
| ä¸º 2 ä¸ªå¯¹è±¡å†™å·¥å‚æ¨¡å¼    | ç›´æ¥å®ä¾‹åŒ–                 |
| åªæœ‰ 1 ä¸ªå‡½æ•°çš„ utils.ts | ä»£ç æ”¾åœ¨å…¶è¢«ä½¿ç”¨çš„åœ°æ–¹     |
| â€œé¦–å…ˆæˆ‘ä»¬å¯¼å…¥â€¦â€¦â€         | ç›´æ¥ç¼–å†™æ ¸å¿ƒä»£ç            |
| æ·±åº¦åµŒå¥—é€»è¾‘             | ä½¿ç”¨å«è¯­å¥ (Guard Clauses) |
| ä½¿ç”¨é­”æœ¯æ•°å­—             | ä½¿ç”¨å…·åå¸¸é‡               |
| ä¸‡èƒ½å‡½æ•° (God functions) | æŒ‰èŒè´£è¿›è¡Œæ‹†åˆ†             |

---

## ğŸ”´ åœ¨ç¼–è¾‘ä»»ä½•æ–‡ä»¶ä¹‹å‰ (å…ˆæ€è€ƒï¼)

**åœ¨ä¿®æ”¹æ–‡ä»¶å‰ï¼Œè¯·å…ˆæ‰ªå¿ƒè‡ªé—®ï¼š**

| æé—®                       | ä¸ºä»€ä¹ˆè¦é—®                    |
| -------------------------- | ----------------------------- |
| **è°å¼•ç”¨äº†è¿™ä¸ªæ–‡ä»¶ï¼Ÿ**     | ä¿®æ”¹å¯èƒ½ä¼šç ´åå®ƒä»¬            |
| **è¿™ä¸ªæ–‡ä»¶å¼•ç”¨äº†è°ï¼Ÿ**     | æ¥å£ (Interface) å¯èƒ½éœ€è¦å˜æ›´ |
| **æœ‰å“ªäº›æµ‹è¯•è¦†ç›–äº†è¿™é‡Œï¼Ÿ** | æµ‹è¯•å¯èƒ½ä¼šå¤±è´¥                |
| **è¿™æ˜¯å…±äº«ç»„ä»¶å—ï¼Ÿ**       | å¯èƒ½å½±å“å¤šä¸ªåœ°æ–¹              |

**å¿«é€Ÿæ£€æŸ¥ç¤ºä¾‹ï¼š**

```
å¾…ç¼–è¾‘æ–‡ä»¶ï¼šUserService.ts
â””â”€â”€ è°å¼•ç”¨äº†å®ƒï¼Ÿ â†’ UserController.ts, AuthController.ts
â””â”€â”€ å®ƒä»¬ä¹Ÿéœ€è¦æ”¹å—ï¼Ÿ â†’ æ£€æŸ¥å‡½æ•°ç­¾åæ˜¯å¦ä¸€è‡´
```

> ğŸ”´ **å‡†åˆ™ï¼š** åœ¨**åŒä¸€ä¸ª**ä»»åŠ¡ä¸­åŒæ—¶ç¼–è¾‘è¯¥æ–‡ä»¶åŠå…¶æ‰€æœ‰å—å½±å“çš„ä¾èµ–æ–‡ä»¶ã€‚
> ğŸ”´ **ç»ä¸å…è®¸ç•™ä¸‹è¿è¡Œå¤±è´¥çš„å¼•ç”¨æˆ–ç¼ºå¤±çš„æ›´æ–°ã€‚**

---

## æ€»ç»“ (Summary)

| æ¨èåšæ³• (Do)  | ç¦æ­¢è¡Œä¸º (Don't)      |
| -------------- | --------------------- |
| ç›´æ¥ç¼–å†™ä»£ç    | ç¼–å†™æ•™ç¨‹å¼çš„å¼•å¯¼      |
| è®©ä»£ç è‡ªæ–‡æ¡£åŒ– | æ·»åŠ æ˜¾è€Œæ˜“è§çš„æ³¨é‡Š    |
| ç«‹å³ä¿®å¤ Bug   | å…ˆè§£é‡Šä¿®å¤æ–¹æ¡ˆ        |
| å†…è”çŸ­å°ä»£ç    | åˆ›å»ºä¸å¿…è¦çš„çç¢æ–‡ä»¶  |
| å‘½åæ¸…æ™°å‡†ç¡®   | ä½¿ç”¨ç¼©å†™              |
| ä¿æŒå‡½æ•°çŸ­å°   | ç¼–å†™è¶…è¿‡ 100 è¡Œçš„å‡½æ•° |

> **è°¨è®°ï¼šè€æ¿æƒ³è¦çš„æ˜¯èƒ½è¿è¡Œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€å ‚ç¼–ç¨‹è¯¾ã€‚**

---

## ğŸ”´ å®Œæˆå‰çš„è‡ªæˆ‘æ£€æŸ¥ (å¼ºåˆ¶æ‰§è¡Œ)

**åœ¨è¯´â€œä»»åŠ¡å®Œæˆâ€ä¹‹å‰ï¼Œè¯·éªŒè¯ï¼š**

| æ£€æŸ¥é¡¹                | ç¡®è®¤é—®é¢˜                          |
| --------------------- | --------------------------------- |
| âœ… **ç›®æ ‡è¾¾æˆäº†å—ï¼Ÿ** | æˆ‘æ˜¯å¦ç²¾å‡†å®Œæˆäº†è€æ¿çš„è¦æ±‚ï¼Ÿ      |
| âœ… **æ–‡ä»¶éƒ½æ”¹äº†å—ï¼Ÿ** | æˆ‘æ˜¯å¦ä¿®æ”¹äº†æ‰€æœ‰å¿…è¦çš„ç›¸å…³æ–‡ä»¶ï¼Ÿ  |
| âœ… **ä»£ç èƒ½è·‘å—ï¼Ÿ**   | æˆ‘æ˜¯å¦æµ‹è¯•/éªŒè¯äº†è¯¥å˜æ›´ï¼Ÿ         |
| âœ… **æ²¡æœ‰æŠ¥é”™å—ï¼Ÿ**   | Lint å’Œ TypeScript æ£€æŸ¥æ˜¯å¦é€šè¿‡ï¼Ÿ |
| âœ… **æ²¡é—æ¼ä»€ä¹ˆå—ï¼Ÿ** | æ˜¯å¦é—æ¼äº†ä»»ä½•è¾¹ç¼˜æƒ…å†µï¼Ÿ          |

> ğŸ”´ **å‡†åˆ™ï¼š** å¦‚æœä»¥ä¸Šä»»ä½•ä¸€é¡¹æ£€æŸ¥å¤±è´¥ï¼Œè¯·åœ¨å®£å¸ƒå®Œæˆå‰å…ˆä¿®å¤å®ƒã€‚

---

## éªŒè¯è„šæœ¬ (MANDATORY)

> ğŸ”´ **æ ¸å¿ƒè¦ç‚¹ï¼š** æ¯ä¸ªä»£ç†æ™ºèƒ½ä½“åœ¨å®Œæˆå·¥ä½œåï¼Œ**ä»…**è¿è¡Œå…¶æ‰€å±æŠ€èƒ½çš„ç‰¹å®šéªŒè¯è„šæœ¬ã€‚

### ä»£ç† â†’ è„šæœ¬æ˜ å°„å…³ç³» (Agent â†’ Script Mapping)

| ä»£ç† (Agent)              | éªŒè¯è„šæœ¬        | æ‰§è¡Œå‘½ä»¤                                                                       |
| ------------------------- | --------------- | ------------------------------------------------------------------------------ |
| **frontend-specialist**   | UX å®¡è®¡         | `python .agent/skills/frontend-design/scripts/ux_audit.py .`                   |
| **frontend-specialist**   | æ— éšœç¢æ£€æŸ¥      | `python .agent/skills/frontend-design/scripts/accessibility_checker.py .`      |
| **backend-specialist**    | API æ ¡éªŒ        | `python .agent/skills/api-patterns/scripts/api_validator.py .`                 |
| **mobile-developer**      | ç§»åŠ¨ç«¯å®¡è®¡      | `python .agent/skills/mobile-design/scripts/mobile_audit.py .`                 |
| **database-architect**    | æ¨¡å¼æ ¡éªŒ        | `python .agent/skills/database-design/scripts/schema_validator.py .`           |
| **security-auditor**      | å®‰å…¨æ‰«æ        | `python .agent/skills/vulnerability-scanner/scripts/security_scan.py .`        |
| **seo-specialist**        | SEO æ£€æŸ¥        | `python .agent/skills/seo-fundamentals/scripts/seo_checker.py .`               |
| **seo-specialist**        | GEO æ£€æŸ¥        | `python .agent/skills/geo-fundamentals/scripts/geo_checker.py .`               |
| **performance-optimizer** | Lighthouse å®¡è®¡ | `python .agent/skills/performance-profiling/scripts/lighthouse_audit.py <url>` |
| **test-engineer**         | æµ‹è¯•è¿è¡Œ        | `python .agent/skills/testing-patterns/scripts/test_runner.py .`               |
| **test-engineer**         | Playwright E2E  | `python .agent/skills/webapp-testing/scripts/playwright_runner.py <url>`       |
| **ä»»ä½•ä»£ç† (Any agent)**  | Lint æ£€æŸ¥       | `python .agent/skills/lint-and-validate/scripts/lint_runner.py .`              |
| **ä»»ä½•ä»£ç† (Any agent)**  | ç±»å‹è¦†ç›–ç‡      | `python .agent/skills/lint-and-validate/scripts/type_coverage.py .`            |
| **ä»»ä½•ä»£ç† (Any agent)**  | i18n æ£€æŸ¥       | `python .agent/skills/i18n-localization/scripts/i18n_checker.py .`             |

> âŒ **é”™è¯¯åšæ³•ï¼š** `test-engineer` å»è¿è¡Œ `ux_audit.py`
> âœ… **æ­£ç¡®åšæ³•ï¼š** `frontend-specialist` å»è¿è¡Œ `ux_audit.py`

---

### ğŸ”´ è„šæœ¬è¾“å‡ºå¤„ç†è§„åˆ™ (é˜…è¯» â†’ æ€»ç»“ â†’ è¯¢é—®)

**è¿è¡ŒéªŒè¯è„šæœ¬æ—¶ï¼Œä½ å¿…é¡»ï¼š**

1. **æ‰§è¡Œè„šæœ¬**å¹¶æ•è·å…¨é‡è¾“å‡ºã€‚
2. **è§£æè¾“å‡º** â€”â€” è¯†åˆ«å‡ºé”™è¯¯ (Error)ã€è­¦å‘Š (Warning) ä»¥åŠé€šè¿‡é¡¹ã€‚
3. **æŒ‰ä»¥ä¸‹æ ¼å¼å‘è€æ¿æ±‡æ€»ï¼š**

```markdown
## è„šæœ¬è¿è¡Œç»“æœï¼š[è„šæœ¬åç§°.py]

### âŒ å‘ç°é”™è¯¯ (X é¡¹)

- [æ–‡ä»¶:è¡Œå·] é”™è¯¯æè¿° 1
- [æ–‡ä»¶:è¡Œå·] é”™è¯¯æè¿° 2

### âš ï¸ è­¦å‘Šäº‹é¡¹ (Y é¡¹)

- [æ–‡ä»¶:è¡Œå·] è­¦å‘Šæè¿°

### âœ… å·²é€šè¿‡ (Z é¡¹)

- æ£€æŸ¥é¡¹ 1 å·²é€šè¿‡
- æ£€æŸ¥é¡¹ 2 å·²é€šè¿‡

**æˆ‘åº”è¯¥ä¿®å¤è¿™ X ä¸ªé”™è¯¯å—ï¼Ÿ**
```

4. **ç­‰å¾…è€æ¿ç¡®è®¤**åå†è¿›è¡Œä¿®å¤ã€‚
5. **ä¿®å¤å** â€”â€” é‡æ–°è¿è¡Œè„šæœ¬ä»¥ç¡®è®¤ä¿®å¤æˆåŠŸã€‚

> ğŸ”´ **è¿è§„é€»è¾‘ï¼š** è¿è¡Œè„šæœ¬åå¿½ç•¥è¾“å‡ºç»“æœ = ä»»åŠ¡å¤±è´¥ã€‚
> ğŸ”´ **è¿è§„é€»è¾‘ï¼š** ä¸ç»è¯¢é—®å³è‡ªåŠ¨è¿›è¡Œä¿®å¤ = ä¸è¢«å…è®¸ã€‚
> ğŸ”´ **å‡†åˆ™ï¼š** å§‹ç»ˆéµå¾ª é˜…è¯»è¾“å‡º â†’ æ€»ç»“ â†’ è¯¢é—® â†’ ä¿®å¤ çš„é—­ç¯æµç¨‹ã€‚

---

