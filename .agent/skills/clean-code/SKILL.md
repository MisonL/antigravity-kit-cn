---
name: clean-code
description: Pragmatic coding standards - concise, direct, no over-engineering, no unnecessary comments
allowed-tools: Read, Write, Edit
version: 2.0
priority: CRITICAL
---

# æ•´æ´ä»£ç  (Clean Code) - åŠ¡å®çš„ AI ç¼–ç æ ‡å‡†

> **å…³é”®æŠ€èƒ½ (CRITICAL SKILL)** - ä¿æŒ **ç®€æ´ã€ç›´æ¥ä¸”ä»¥è§£å†³æ–¹æ¡ˆä¸ºä¸­å¿ƒ**ã€‚

---

## æ ¸å¿ƒåŸåˆ™ (Core Principles)

| åŸåˆ™          | è§„åˆ™                                                           |
| ------------- | -------------------------------------------------------------- |
| **SRP**       | å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility) - æ¯ä¸ªå‡½æ•°/ç±»åªåšä¸€ä»¶äº‹   |
| **DRY**       | ä¸è¦é‡å¤è‡ªå·± (Don't Repeat Yourself) - æå–é‡å¤ä»£ç ï¼Œå¤ç”¨      |
| **KISS**      | ä¿æŒç®€å• (Keep It Simple) - ä½¿ç”¨æœ‰æ•ˆçš„æœ€ç®€å•è§£å†³æ–¹æ¡ˆ           |
| **YAGNI**     | ä½ å¹¶ä¸éœ€è¦å®ƒ (You Aren't Gonna Need It) - ä¸è¦æ„å»ºä¸ä½¿ç”¨çš„åŠŸèƒ½ |
| **Boy Scout** | ç«¥å­å†›è§„åˆ™ (Boy Scout) - è®©ä»£ç æ¯”ä½ å‘ç°æ—¶æ›´æ•´æ´                |

---

## å‘½åè§„åˆ™ (Naming Rules)

| å…ƒç´                   | çº¦å®š                                                |
| --------------------- | --------------------------------------------------- |
| **å˜é‡ (Variables)**  | æ­ç¤ºæ„å›¾ï¼šç”¨ `userCount` è€Œä¸æ˜¯ `n`                 |
| **å‡½æ•° (Functions)**  | åŠ¨è¯ + åè¯ï¼šç”¨ `getUserById()` è€Œä¸æ˜¯ `user()`     |
| **å¸ƒå°”å€¼ (Booleans)** | ç–‘é—®å¥å½¢å¼ï¼š`isActive`, `hasPermission`, `canEdit`  |
| **å¸¸é‡ (Constants)**  | å…¨éƒ¨å¤§å†™ä¸‹åˆ’çº¿ (SCREAMING_SNAKE)ï¼š`MAX_RETRY_COUNT` |

> **è§„åˆ™ (Rule):** å¦‚æœä½ éœ€è¦æ³¨é‡Šæ¥è§£é‡Šä¸€ä¸ªåç§°ï¼Œè¯·é‡å‘½åå®ƒã€‚

---

## å‡½æ•°è§„åˆ™ (Function Rules)

| è§„åˆ™                           | æè¿°                         |
| ------------------------------ | ---------------------------- |
| **å° (Small)**                 | æœ€å¤š 20 è¡Œï¼Œç†æƒ³æƒ…å†µ 5-10 è¡Œ |
| **ä¸€ä»¶äº‹ (One Thing)**         | åšä¸€ä»¶äº‹ï¼Œå¹¶æŠŠå®ƒåšå¥½         |
| **ä¸€ä¸ªå±‚çº§ (One Level)**       | æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§         |
| **å‚æ•°å°‘ (Few Args)**          | æœ€å¤š 3 ä¸ªå‚æ•°ï¼Œé¦–é€‰ 0-2 ä¸ª   |
| **æ— å‰¯ä½œç”¨ (No Side Effects)** | ä¸è¦æ„å¤–åœ°ä¿®æ”¹è¾“å…¥           |

---

## ä»£ç ç»“æ„ (Code Structure)

| æ¨¡å¼                            | åº”ç”¨                     |
| ------------------------------- | ------------------------ |
| **å«è¯­å¥ (Guard Clauses)**      | è¾¹ç¼˜æƒ…å†µå°½æ—©è¿”å›         |
| **æ‰å¹³ > åµŒå¥— (Flat > Nested)** | é¿å…æ·±å±‚åµŒå¥— (æœ€å¤š 2 å±‚) |
| **ç»„åˆ (Composition)**          | å°å‡½æ•°ç»„åˆåœ¨ä¸€èµ·         |
| **å…±ç½® (Colocation)**           | ä¿æŒç›¸å…³ä»£ç é è¿‘         |

---

## AI ç¼–ç é£æ ¼ (AI Coding Style)

| æƒ…æ™¯         | è¡ŒåŠ¨             |
| ------------ | ---------------- |
| ç”¨æˆ·è¦æ±‚åŠŸèƒ½ | ç›´æ¥ç¼–å†™ä»£ç      |
| ç”¨æˆ·æŠ¥å‘Š Bug | ä¿®å¤å®ƒï¼Œä¸è¦è§£é‡Š |
| æ— æ˜ç¡®éœ€æ±‚   | è¯¢é—®ï¼Œä¸è¦å‡è®¾   |

---

## åæ¨¡å¼ (Anti-Patterns) - ä¸è¦ (DON'T)

| âŒ æ¨¡å¼                  | âœ… ä¿®å¤              |
| ------------------------ | -------------------- |
| æ¯è¡Œéƒ½å†™æ³¨é‡Š             | åˆ é™¤æ˜¾è€Œæ˜“è§çš„æ³¨é‡Š   |
| å•è¡Œä»£ç å†™ Helper        | å†…è”ä»£ç              |
| 2 ä¸ªå¯¹è±¡å†™å·¥å‚æ¨¡å¼       | ç›´æ¥å®ä¾‹åŒ–           |
| utils.ts é‡Œåªæœ‰ 1 ä¸ªå‡½æ•° | æŠŠä»£ç æ”¾åœ¨ä½¿ç”¨çš„åœ°æ–¹ |
| "æˆ‘ä»¬é¦–å…ˆå¼•å…¥..."        | ç›´æ¥å†™ä»£ç            |
| æ·±å±‚åµŒå¥—                 | ä½¿ç”¨å«è¯­å¥           |
| é­”æœ¯æ•°å­—                 | ä½¿ç”¨å‘½åå¸¸é‡         |
| ä¸Šå¸å‡½æ•° (God functions) | æŒ‰èŒè´£æ‹†åˆ†           |

---

## ğŸ”´ ç¼–è¾‘ä»»ä½•æ–‡ä»¶å‰ (å…ˆæ€è€ƒï¼)

**åœ¨æ›´æ”¹æ–‡ä»¶ä¹‹å‰ï¼Œé—®é—®è‡ªå·±ï¼š**

| é—®é¢˜                     | ä¸ºä»€ä¹ˆ         |
| ------------------------ | -------------- |
| **ä»€ä¹ˆå¯¼å…¥äº†è¿™ä¸ªæ–‡ä»¶ï¼Ÿ** | å®ƒä»¬å¯èƒ½ä¼šå   |
| **è¿™ä¸ªæ–‡ä»¶å¯¼å…¥äº†ä»€ä¹ˆï¼Ÿ** | æ¥å£å˜æ›´       |
| **ä»€ä¹ˆæµ‹è¯•è¦†ç›–äº†è¿™é‡Œï¼Ÿ** | æµ‹è¯•å¯èƒ½ä¼šå¤±è´¥ |
| **è¿™æ˜¯ä¸€ä¸ªå…±äº«ç»„ä»¶å—ï¼Ÿ** | å¤šå¤„å—å½±å“     |

**å¿«é€Ÿæ£€æŸ¥ï¼š**

```
File to edit: UserService.ts
â””â”€â”€ Who imports this? â†’ UserController.ts, AuthController.ts
â””â”€â”€ Do they need changes too? â†’ Check function signatures
```

> ğŸ”´ **è§„åˆ™ (Rule):** åœ¨åŒä¸€ä¸ªä»»åŠ¡ä¸­ç¼–è¾‘è¯¥æ–‡ä»¶ + æ‰€æœ‰ä¾èµ–æ–‡ä»¶ã€‚
> ğŸ”´ **æ°¸è¿œä¸è¦ç•™ä¸‹æŸåçš„å¯¼å…¥æˆ–ç¼ºå¤±çš„æ›´æ–°ã€‚**

---

## æ€»ç»“ (Summary)

| è¦ (Do)        | ä¸è¦ (Don't)       |
| -------------- | ------------------ |
| ç›´æ¥å†™ä»£ç      | å†™æ•™ç¨‹             |
| è®©ä»£ç è‡ªæ–‡æ¡£åŒ– | æ·»åŠ æ˜¾è€Œæ˜“è§çš„æ³¨é‡Š |
| ç«‹å³ä¿®å¤ Bug   | å…ˆè§£é‡Šä¿®å¤         |
| å†…è”å°ä¸œè¥¿     | åˆ›å»ºä¸å¿…è¦çš„æ–‡ä»¶   |
| æ¸…æ™°å‘½å       | ä½¿ç”¨ç¼©å†™           |
| ä¿æŒå‡½æ•°å°     | å†™ 100+ è¡Œçš„å‡½æ•°   |

> **è®°ä½ï¼šç”¨æˆ·æƒ³è¦çš„æ˜¯å·¥ä½œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ç¼–ç¨‹è¯¾ã€‚**

---

## ğŸ”´ å®Œæˆå‰è‡ªæ£€ (å¼ºåˆ¶æ‰§è¡Œ)

**åœ¨è¯´â€œä»»åŠ¡å®Œæˆâ€ä¹‹å‰ï¼ŒéªŒè¯ï¼š**

| æ£€æŸ¥                | é—®é¢˜                          |
| ------------------- | ----------------------------- |
| âœ… **ç›®æ ‡è¾¾æˆï¼Ÿ**   | æˆ‘æ˜¯å¦å®Œå…¨æŒ‰ç”¨æˆ·è¦æ±‚åšäº†ï¼Ÿ    |
| âœ… **æ–‡ä»¶å·²ç¼–è¾‘ï¼Ÿ** | æˆ‘æ˜¯å¦ä¿®æ”¹äº†æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶ï¼Ÿ  |
| âœ… **ä»£ç å·¥ä½œï¼Ÿ**   | æˆ‘æ˜¯å¦æµ‹è¯•/éªŒè¯äº†å˜æ›´ï¼Ÿ       |
| âœ… **æ— é”™è¯¯ï¼Ÿ**     | Lint å’Œ TypeScript é€šè¿‡äº†å—ï¼Ÿ |
| âœ… **æ— é—æ¼ï¼Ÿ**     | æœ‰é—æ¼ä»»ä½•è¾¹ç¼˜æƒ…å†µå—ï¼Ÿ        |

> ğŸ”´ **è§„åˆ™ (Rule):** å¦‚æœä»»ä½•æ£€æŸ¥å¤±è´¥ï¼Œåœ¨å®Œæˆä¹‹å‰ä¿®å¤å®ƒã€‚

---

## éªŒè¯è„šæœ¬ (å¼ºåˆ¶æ‰§è¡Œ)

> ğŸ”´ **å…³é”® (CRITICAL):** æ¯ä¸ª Agent (æ™ºèƒ½ä½“) åœ¨å®Œæˆå·¥ä½œåä»…è¿è¡Œè‡ªå·± Skill (æŠ€èƒ½) çš„è„šæœ¬ã€‚

### Agent â†’ è„šæœ¬æ˜ å°„

| Agent                     | è„šæœ¬                    | å‘½ä»¤                                                                           |
| ------------------------- | ----------------------- | ------------------------------------------------------------------------------ |
| **frontend-specialist**   | UX å®¡è®¡                 | `python .agent/skills/frontend-design/scripts/ux_audit.py .`                   |
| **frontend-specialist**   | æ— éšœç¢æ£€æŸ¥ (A11y Check) | `python .agent/skills/frontend-design/scripts/accessibility_checker.py .`      |
| **backend-specialist**    | API éªŒè¯å™¨              | `python .agent/skills/api-patterns/scripts/api_validator.py .`                 |
| **mobile-developer**      | ç§»åŠ¨ç«¯å®¡è®¡              | `python .agent/skills/mobile-design/scripts/mobile_audit.py .`                 |
| **database-architect**    | Schema éªŒè¯             | `python .agent/skills/database-design/scripts/schema_validator.py .`           |
| **security-auditor**      | å®‰å…¨æ‰«æ                | `python .agent/skills/vulnerability-scanner/scripts/security_scan.py .`        |
| **seo-specialist**        | SEO æ£€æŸ¥                | `python .agent/skills/seo-fundamentals/scripts/seo_checker.py .`               |
| **seo-specialist**        | GEO æ£€æŸ¥                | `python .agent/skills/geo-fundamentals/scripts/geo_checker.py .`               |
| **performance-optimizer** | Lighthouse              | `python .agent/skills/performance-profiling/scripts/lighthouse_audit.py <url>` |
| **test-engineer**         | æµ‹è¯•è¿è¡Œå™¨              | `python .agent/skills/testing-patterns/scripts/test_runner.py .`               |
| **test-engineer**         | Playwright              | `python .agent/skills/webapp-testing/scripts/playwright_runner.py <url>`       |
| **ä»»æ„ Agent**            | Lint æ£€æŸ¥               | `python .agent/skills/lint-and-validate/scripts/lint_runner.py .`              |
| **ä»»æ„ Agent**            | ç±»å‹è¦†ç›–ç‡              | `python .agent/skills/lint-and-validate/scripts/type_coverage.py .`            |
| **ä»»æ„ Agent**            | å›½é™…åŒ– (i18n) æ£€æŸ¥      | `python .agent/skills/i18n-localization/scripts/i18n_checker.py .`             |

> âŒ **é”™è¯¯ (WRONG):** `test-engineer` è¿è¡Œ `ux_audit.py`
> âœ… **æ­£ç¡® (CORRECT):** `frontend-specialist` è¿è¡Œ `ux_audit.py`

---

### ğŸ”´ è„šæœ¬è¾“å‡ºå¤„ç† (è¯»å– â†’ æ€»ç»“ â†’ è¯¢é—®)

**è¿è¡ŒéªŒè¯è„šæœ¬æ—¶ï¼Œä½ å¿…é¡»ï¼š**

1. **è¿è¡Œè„šæœ¬** å¹¶æ•è·æ‰€æœ‰è¾“å‡º
2. **è§£æè¾“å‡º** - è¯†åˆ«é”™è¯¯ã€è­¦å‘Šå’Œé€šè¿‡é¡¹
3. **å‘ç”¨æˆ·æ€»ç»“**ï¼Œä½¿ç”¨æ­¤æ ¼å¼ï¼š

```markdown
## è„šæœ¬ç»“æœ: [script_name.py]

### âŒ å‘ç°é”™è¯¯ (X é¡¹)

- [File:Line] é”™è¯¯æè¿° 1
- [File:Line] é”™è¯¯æè¿° 2

### âš ï¸ è­¦å‘Š (Y é¡¹)

- [File:Line] è­¦å‘Šæè¿°

### âœ… é€šè¿‡ (Z é¡¹)

- æ£€æŸ¥ 1 é€šè¿‡
- æ£€æŸ¥ 2 é€šè¿‡

**æˆ‘åº”è¯¥ä¿®å¤è¿™ X ä¸ªé”™è¯¯å—ï¼Ÿ**
```

4. **ç­‰å¾…ç”¨æˆ·ç¡®è®¤** å†è¿›è¡Œä¿®å¤
5. **ä¿®å¤å** â†’ é‡æ–°è¿è¡Œè„šæœ¬ä»¥ç¡®è®¤

> ğŸ”´ **è¿è§„ (VIOLATION):** è¿è¡Œè„šæœ¬å¿½ç•¥è¾“å‡º = ä»»åŠ¡å¤±è´¥ã€‚
> ğŸ”´ **è¿è§„ (VIOLATION):** æœªç»è¯¢é—®è‡ªåŠ¨ä¿®å¤ = ä¸å…è®¸ã€‚
> ğŸ”´ **è§„åˆ™ (Rule):** å§‹ç»ˆ è¯»å–è¾“å‡º â†’ æ€»ç»“ â†’ è¯¢é—® â†’ ç„¶åä¿®å¤ã€‚
