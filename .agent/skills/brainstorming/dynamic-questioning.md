# 动态提问生成 (Dynamic Question Generation)

> **原则:** 提问不是为了收集数据——而是为了**揭示架构后果**。
>
> 每一个问题都必须关联到一个具体的、影响成本、复杂度或时间表的实现决策。

---

## 🧠 核心原则

### 1. 问题揭示后果

如果不问这个问题，我们以后会付出什么代价？

- **坏问题**: "你需要什么数据库？" (这让用户做工作)
- **好问题**: "你的数据是需要复杂的搜索关系 (Graph/SQL)，还是简单的基于键的查找 (KV/NoSQL)？这对我们选择 Supabase 还是 DynamoDB 有直接影响。"

### 2. 二阶思维

永远不要只问需求本身，要问需求的**影响**。

- **需求**: "我想支持文件上传。"
- **问题**: "我们是否需要支持大文件或者仅支持图片？如果是大文件，我们可能需要 S3 Multipart Upload，这比简单的 Base64 上传复杂度高很多。"

---

## 🔍 问题生成策略

### 针对不同领域的种子问题 (Seed Questions)

#### A. 如果用户要求 "创建一个 Admin 面板":

1. **Auth**: "它是仅限内部员工使用，还是以后会开放给外部商户？这决定了我们是使用简单的 RBAC 还是多租户架构。"
2. **Data**: "你需要看到实时的指标，还是每天更新一次即可？实时数据可能需要 WebSocket 或轮询，成本较高。"

#### B. 如果用户要求 "添加 AI 功能":

1. **Latency**: "用户是否需要流式响应 (打字机效果)？如果是，我们需要使用 Edge Runtime 或 WebSocket，这会限制我们的一些后端库选择。"
2. **Context**: "AI 是否需要访问用户的历史数据？如果需要，我们得考虑 Vector DB (pgvector) 的集成。"

#### C. 如果用户要求 "移动端 App":

1. **Offline**: "用户是否需要在断网或是信号差的环境下工作？离线支持意味着我们需要本地数据库同步 (Local-First)，架构复杂度 x3。"
2. **Push**: "通知是核心功能吗？如果是，我们需要尽早集成 Firebase/APNs。"

---

## 🛠️ 执行协议

当遇到不明确的需求时：

1. **停顿 (Pause)**: 不要假设，不要直接写代码。
2. **模拟 (Simulate)**: 在脑海中模拟代码实现的路径。
3. **识别分歧点 (Identify Forks)**: 找到那些"我可以这样做，也可以那样做"的时刻。
4. **转化为问题 (Convert to Question)**: 将这个分歧点转化为给用户的问题，并解释权衡。

> **示例**:
> "我注意到你想做图片分享。我们是仅仅存储原图，还是需要自动生成缩略图以优化加载速度？生成缩略图需要额外的云函数配置。"

---

## 🚫 反模式

- **问一些自己能决定的问题**: "你想要用 TypeScript 吗？" -> **别问，直接用最佳实践。**
- **一次性问太多**: 不要扔给用户 10 个问题。一次 2-3 个关键问题足够。
- **技术术语堆砌**: 不要问 "由于 CAP 定理你需要 CP 还是 AP？"，要问 "在断网时，数据是一致性重要还是可用性重要？"

## 协同入口

当问题聚焦故障排查时，可把动态提问作为 `/debug` 的前置澄清步骤。
